name: exported_workspace
publish_to: none

environment:
  sdk: ^3.6.1

workspace:
  - packages/exported
  - packages/exported/example
  - packages/exported_annotation
  - tools/lints

dev_dependencies:
  melos: ^7.0.0-dev.7

melos:
  repository: https://github.com/jnnkmsr/exported
  sdkPath: auto
  ide:
    intellij:
      enable: true
      moduleNamePrefix: ''

  command:
    version:
      branch: develop
      includeScopes: false
      workspaceChangelog: false
      message: |
        chore: automated versioning
        
        {new_package_versions}

    bootstrap:
      runPubGetInParallel: true
      runPutGetOffline: false
      enforceLockfile: false

      environment:
        sdk: ^3.6.1
      dependencies:
        analyzer: ">=6.0.0 <8.0.0"
        build: ^2.4.2
        collection: ^1.19.0             # Pinned by flutter_test.
        dart_style: ^3.0.1
        fast_immutable_collections: ^11.0.3
        file: ^7.0.1
        glob: ^2.1.3
        meta: ^1.15.0                   # Pinned by flutter_test.
        path: ^1.9.0                    # Pinned by flutter_test
        source_gen: ^2.0.0
        yaml: ^3.1.3
      dev_dependencies:
        build_runner: ^2.4.14
        build_test: ^2.2.3
        mocktail: ^1.0.4
        test: ^1.25.8                   # Pinned by flutter_test.
        very_good_analysis: ^7.0.0

  # Semantic prefixes and icons:
  #   ðŸ“¦ build - Tasks related to compiling and building artifacts.
  #   ðŸ§¹ clean - Removing generated files, caches, and resetting the workspace.
  #   ðŸš€ deploy - CI/CD and publishing-related tasks.
  #   ðŸŽ¨ format - Formatting code, enforcing style rules, and static analysis.
  #   ðŸ—ï¸ generate - Code generation and boilerplate creation.
  #   ðŸ·ï¸ release - Managing versions, releases, and changelogs.
  #   ðŸ“Š report - Generating reports and coverage metrics.
  #   âš™ï¸ setup - Setup, initialization, and configuration.
  #   ðŸ§ª test - Running unit, integration, and UI tests.
  #   ðŸ› ï¸ tools - Other utility scripts not fitting elsewhere.
  scripts:
    clean:build_runner:
      description: |
        ðŸ§¹ Clean the `build_runner` cache for a selected package.
      exec: |
        dart run build_runner clean
      packageFilters:
        dependsOn: build_runner
    generate:build_runner:
      description: |
        ðŸ—ï¸ Run `build_runner` for a selected package.
      exec: |
        dart run build_runner build -d
      packageFilters:
        dependsOn: build_runner
